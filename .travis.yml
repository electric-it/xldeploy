language: ruby
#cache: bundler

sudo: false

rvm:
  - 2.2.1

# Run Foodcritic to check cookbook
script:
  - bundle exec foodcritic .

# Decrypt the Supermarket client key and push to the Supermarket
after_success:
  - openssl aes-256-cbc -K $encrypted_d4c67d5078bb_key -iv $encrypted_d4c67d5078bb_iv
    -in .travis/chef-io-private.pem.enc -out .travis/chef-io-private.pem -d
  - bundle exec dpl --provider=chef-supermarket --user-id=berniedurfee-ge --client-key=.travis/chef-io-private.pem --cookbook-category=Others
